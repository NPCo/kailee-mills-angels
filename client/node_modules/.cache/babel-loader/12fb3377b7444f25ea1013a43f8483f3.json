{"ast":null,"code":"import _toConsumableArray from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Code\\\\Projects\\\\NPCo\\\\kailee-mills-angels\\\\client\\\\src\\\\views\\\\AngelDisplay.js\";\nimport React, { Component } from 'react';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport Transition from 'react-transition-group/Transition';\nimport sizeMe from 'react-sizeme';\nimport uuid from 'uuid';\nimport AngelElement from '../components/AngelElement.js';\nimport AngelExpanded from '../components/AngelExpanded.js';\nvar HEIGHT_GAP = 10;\nvar ANGEL_TEMPLATE = {\n  color: 'white',\n  photo: '#',\n  name: '...',\n  dates: '',\n  bio: []\n};\n\nvar assignId = function assignId(a) {\n  return a.hasOwnProperty('_id') ? a : Object.assign(a, {\n    _id: uuid()\n  });\n};\n\nexport default sizeMe()(\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AngelDisplay, _Component);\n\n  function AngelDisplay(props) {\n    var _this;\n\n    _classCallCheck(this, AngelDisplay);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AngelDisplay).call(this, props));\n    _this.state = {\n      selectedId: null,\n      triggered: false,\n      angels: []\n    };\n    var angels = _this.props.angels;\n    if (typeof angels === 'function') angels().then(function (data) {\n      return data.map(assignId);\n    }).then(function (data) {\n      return _this.setState({\n        angels: data\n      });\n    }).catch(function (err) {\n      return console.error('Error getting angels -', err);\n    });else _this.state = Object.assign(_this.state, {\n      angels: angels.map(assignId)\n    });\n    _this.selectId = _this.selectId.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.trigger = _this.trigger.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AngelDisplay, [{\n    key: \"selectId\",\n    value: function selectId(_id) {\n      this.setState({\n        selectedId: _id,\n        triggered: false\n      });\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger() {\n      this.setState({\n        triggered: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          angels = _this$state.angels,\n          selectedId = _this$state.selectedId;\n      var _this$props = this.props,\n          width = _this$props.width,\n          height = _this$props.height;\n      var columns = +(this.props.columns || Math.max.apply(Math, _toConsumableArray(angels.map(function (a) {\n        return +a.w + +a.x - 1;\n      }))) || 4);\n      var rows = +(this.props.rows || Math.max.apply(Math, _toConsumableArray(angels.map(function (a) {\n        return +a.h + +a.y - 1;\n      }))) || 3);\n      var WIDTH_GAP = (this.props.size.width - columns * width) / (columns - 1);\n\n      if (this.state.triggered) {\n        var angel = Object.assign(ANGEL_TEMPLATE, angels.find(function (a) {\n          return a._id === selectedId;\n        }));\n        /* render fully expanded angel */\n\n        return React.createElement(AngelExpanded, {\n          angel: angel,\n          height: \"\".concat(rows * (height + HEIGHT_GAP) - HEIGHT_GAP, \"px\"),\n          exit: function exit() {\n            return _this2.selectId(null);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        });\n      }\n      /* render grid */\n\n\n      return React.createElement(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: \"repeat(\".concat(columns || 4, \", \").concat(width || 100, \"px)\"),\n          gridTemplateRows: \"repeat(\".concat(rows || 3, \", \").concat(height || 100, \"px)\"),\n          columnGap: \"calc((100% - \".concat(columns * width, \"px) / \").concat(columns - 1, \")\"),\n          height: \"\".concat(rows * (height + HEIGHT_GAP) - HEIGHT_GAP, \"px\"),\n          rowGap: \"\".concat(HEIGHT_GAP, \"px\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(TransitionGroup, {\n        component: null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, angels.filter(function (a) {\n        return a._id !== selectedId;\n      }).map(function (a) {\n        return React.createElement(Transition, {\n          key: \"angel-element-\".concat(a._id),\n          timeout: {\n            exit: 500\n          },\n          unmountOnExit: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, function (state) {\n          return React.createElement(AngelElement, Object.assign({\n            transitionState: state,\n            onSelected: function onSelected() {\n              return _this2.selectId(a._id);\n            },\n            expandMargin: {\n              top: \"\".concat((height + HEIGHT_GAP) * (1 - a.y), \"px\"),\n              left: \"\".concat((width + WIDTH_GAP) * (1 - a.x), \"px\"),\n              bottom: \"\".concat((height + HEIGHT_GAP) * (a.y + a.h - 1 - rows), \"px\"),\n              right: \"\".concat((width + WIDTH_GAP) * (a.x + a.w - 1 - columns), \"px\")\n            },\n            trigger: function trigger() {\n              return _this2.trigger();\n            }\n          }, a, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }));\n        });\n      })));\n    }\n  }]);\n\n  return AngelDisplay;\n}(Component));","map":{"version":3,"sources":["D:\\Code\\Projects\\NPCo\\kailee-mills-angels\\client\\src\\views\\AngelDisplay.js"],"names":["React","Component","TransitionGroup","Transition","sizeMe","uuid","AngelElement","AngelExpanded","HEIGHT_GAP","ANGEL_TEMPLATE","color","photo","name","dates","bio","assignId","a","hasOwnProperty","Object","assign","_id","props","state","selectedId","triggered","angels","then","data","map","setState","catch","err","console","error","selectId","bind","trigger","width","height","columns","Math","max","w","x","rows","h","y","WIDTH_GAP","size","angel","find","display","gridTemplateColumns","gridTemplateRows","columnGap","rowGap","filter","exit","top","left","bottom","right"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport TransitionGroup from 'react-transition-group/TransitionGroup'\r\nimport Transition from 'react-transition-group/Transition'\r\nimport sizeMe from 'react-sizeme'\r\nimport uuid from 'uuid'\r\n\r\nimport AngelElement from '../components/AngelElement.js'\r\nimport AngelExpanded from '../components/AngelExpanded.js'\r\n\r\nconst HEIGHT_GAP = 10\r\nconst ANGEL_TEMPLATE = { color: 'white', photo: '#', name: '...', dates: '', bio: [] }\r\nconst assignId = a => a.hasOwnProperty('_id') ? a : Object.assign(a, { _id: uuid() })\r\n\r\nexport default sizeMe()(class AngelDisplay extends Component {\r\n\r\n  state = {\r\n    selectedId: null,\r\n    triggered: false,\r\n    angels: []\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { angels } = this.props\r\n\r\n    if (typeof angels === 'function')\r\n      angels()\r\n        .then(data => data.map(assignId))\r\n        .then(data => this.setState({ angels: data }))\r\n        .catch(err => console.error('Error getting angels -', err))\r\n    else\r\n      this.state = Object.assign(this.state, { angels: angels.map(assignId) })\r\n\r\n    this.selectId = this.selectId.bind(this)\r\n    this.trigger = this.trigger.bind(this)\r\n  }\r\n\r\n  selectId(_id) {\r\n    this.setState({\r\n      selectedId: _id,\r\n      triggered: false\r\n    })\r\n  }\r\n\r\n  trigger() {\r\n    this.setState({\r\n      triggered: true\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    const { angels, selectedId } = this.state\r\n    const { width, height } = this.props\r\n    \r\n    const columns = +(this.props.columns || Math.max(...angels.map(a => +a.w + +a.x - 1)) || 4)\r\n    const rows = +(this.props.rows || Math.max(...angels.map(a => +a.h + +a.y - 1)) || 3)\r\n\r\n    const WIDTH_GAP = (this.props.size.width - columns * width) / (columns - 1)\r\n\r\n    if (this.state.triggered) {\r\n      \r\n      const angel = Object.assign(ANGEL_TEMPLATE, angels.find(a => a._id === selectedId))\r\n\r\n      /* render fully expanded angel */\r\n      return <AngelExpanded angel={angel} \r\n        height={`${rows * (height + HEIGHT_GAP) - HEIGHT_GAP}px`}\r\n        exit={() => this.selectId(null)} />\r\n    }\r\n\r\n    /* render grid */\r\n    return (\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: `repeat(${columns || 4}, ${width || 100}px)`,\r\n          gridTemplateRows: `repeat(${rows || 3}, ${height || 100}px)`,\r\n          columnGap: `calc((100% - ${columns * width}px) / ${columns - 1})`,\r\n          height: `${rows * (height + HEIGHT_GAP) - HEIGHT_GAP}px`,\r\n          rowGap: `${HEIGHT_GAP}px`\r\n        }}>\r\n          <TransitionGroup component={null}>\r\n            {\r\n              angels\r\n                .filter(a => a._id !== selectedId)\r\n                .map(a => (\r\n\t\t\t            <Transition key={`angel-element-${a._id}`} timeout={{exit: 500}} unmountOnExit>\r\n                    {state => \r\n                      <AngelElement transitionState={state}\r\n                        onSelected={() => this.selectId(a._id)}\r\n                        expandMargin={{\r\n                          top: `${(height + HEIGHT_GAP) * (1 - a.y)}px`,\r\n                          left: `${(width + WIDTH_GAP) * (1 - a.x)}px`,\r\n                          bottom: `${(height + HEIGHT_GAP) * (a.y + a.h - 1 - rows)}px`,\r\n                          right: `${(width + WIDTH_GAP) * (a.x + a.w - 1 - columns)}px`,\r\n                        }}\r\n                        trigger={() => this.trigger()} {...a} />}\r\n                    </Transition>\r\n                ))\r\n            }\r\n          </TransitionGroup>\r\n        </div>\r\n      )\r\n  }\r\n})"]},"metadata":{},"sourceType":"module"}